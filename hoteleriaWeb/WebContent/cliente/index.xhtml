<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui">
<f:metadata>
	<f:event listener="#{beanLogin.actionVerificarLogin()}"
		type="preRenderView"></f:event>
</f:metadata>
    <meta charset="utf-8"></meta>
    <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
 <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"></link>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
<h:head>
	<title>Cliente</title>
</h:head> 
<body onload="nobackbutton();"> 
<h:form>
<style type="text/css">
    .value {
        font-weight: bold;
    }
</style>
		<p:menubar>
			<p:menuitem value="Cliente" style="Color:maroon;"></p:menuitem>
			<p:menuitem value="Reservas" action="facturas" icon="fa fa-bars"></p:menuitem>
			<f:facet name="options">
				<p:outputLabel value="#{beanLogin.usuario}" style= "Color: #5f6a6a ; padding-right:2px;"></p:outputLabel>
				<p:commandButton value="Salir" action="#{beanLogin.salirSistema()}" icon="fa fa-sign-out"/>
			</f:facet>
		</p:menubar>
	</h:form>
	<br/>

	<div class="Container">
	<!-- <div class="jumbotron"><h3 class="text-secondary">CLIENTE</h3></div> -->
	<p:growl>
			<p:autoUpdate />
		</p:growl>
		<!-- <h:form id="form">
			<p:panel header="Habitaciones Disponibles">
				<p:dataTable value="#{beanHabitaciones.listadoHabitaciones}" reflow="true"
					var="habitaciones" >
					<p:column headerText="Tipo Habitación" 
						filterMatchMode="contains" priority="1">
						<h:outputText value="#{habitaciones.descripcion}" />
					</p:column>
					<p:column headerText="Número Habitación" 
						filterMatchMode="contains" priority="1">
						<h:outputText value="#{habitaciones.numerohabitacion}" />
					</p:column>
					<p:column headerText="Número Piso" priority="2">
						<h:outputText value="#{habitaciones.numeropiso}" />
					</p:column>
					<p:column headerText="Precio" priority="3">
						<h:outputText value="#{habitaciones.precio}" />
					</p:column>
					
				</p:dataTable>
			</p:panel>
		</h:form> -->
	<h:form id="form1">
	<p:commandButton action="#{beanReserva.crearNuevaReserva()}"
					value="Crear nueva reserva" 
					icon="fa fa-file-o" update="form1: form2"
					disabled="#{beanReserva.activForm==true}"/>
	<p:commandButton value="Guardar factura" icon="fa fa-save"
					action="#{beanReserva.guardarFactura()}" update="@form" />
	</h:form>
		

		<p:panel header="Detalle de Habitaciones" id="panel1">
			<p:panelGrid columns="4" border="1">
				<h:form id="form2">
					<h:outputText value="Tipo habitación" />
					<p:selectOneMenu value="#{beanReserva.idTipoHabitacion}" disabled="#{beanReserva.activForm==false}">
					<f:selectItem itemLabel="Seleccione" itemValue="-1"
						noSelectionOption="true" />
					<f:selectItems value="#{beanReserva.tipoHabitaciones}"  />
					<p:ajax update="sHab"></p:ajax>
					</p:selectOneMenu>
				
					<h:outputText value="Habitación: " />
					<p:selectOneMenu value="#{beanReserva.idHabitacion}" id="sHab">
					<f:selectItem itemLabel="Seleccione" itemValue="-1"
							noSelectionOption="true" />
					<f:selectItems value="#{beanReserva.listaHabitacionesSI}" />
					</p:selectOneMenu>
					<h:outputText value="Días:" />
					<p:spinner value="#{beanReserva.dias}" min="1" />
					<p:outputLabel for="fecha" value="Fecha:" />
    			    <p:calendar id="fecha" value="#{beanReserva.fecha}" />
   					<p:commandButton value="adicionar"
						action="#{beanReserva.insertarDetalle()}" update="form2"
						icon="fa fa-plus" />
					<p:dataTable value="#{beanReserva.facturaCabTmp.facDetalles}"
						var="d" id="tablaFacturaDets">
						<p:column style="width:110px" headerText="FOTO">
							<h:graphicImage style="width:300px;" value="../imagenes/cama.jpg" />
						</p:column>
						<p:column style="width:110px" headerText="TIPO">
							<h:outputText value="#{d.invHabitacione.invTiposhabitacione.nombretipohabitacion}" />
						</p:column>
						<p:column style="width:40px" headerText="PISO">
							<h:outputText value="#{d.invHabitacione.numeropiso}" />
						</p:column>
						<p:column style="width:40px" headerText="HABITACIÓN">
							<h:outputText value="#{d.invHabitacione.numerohabitacion}" />
						</p:column>
						<p:column style="width:40px" headerText="DÍAS">
							<h:outputText value="#{d.diasestadia}" />
						</p:column>
						<p:column style="width:100px" headerText="FECHA">
							<h:outputText value="#{d.fechauso}" />
						</p:column>
						<p:column style="width:80px;text-align:right"
							headerText="PRECIO">
							<h:outputText value="#{d.precioUnit}"
								style="text-align:right" />
							<f:facet name="footer">
								<h:panelGrid columns="2"
									style="font-weight: bold; text-align:right">
									<h:outputText value="SUMA:" />
									<h:outputText value="#{beanReserva.facturaCabTmp.subtotal}">
										<f:convertNumber maxFractionDigits="2" minFractionDigits="2"
											currencySymbol="$" />
									</h:outputText>
									<h:outputText value="IVA:" />
									<h:outputText value="#{beanReserva.facturaCabTmp.valorIva}">
										<f:convertNumber maxFractionDigits="2" minFractionDigits="2"
											currencySymbol="$" />
									</h:outputText>
									<h:outputText value="TOTAL:" />
									<h:outputText value="#{beanReserva.facturaCabTmp.total}">
										<f:convertNumber maxFractionDigits="2" minFractionDigits="2"
											currencySymbol="$" />
									</h:outputText>
								</h:panelGrid>
							</f:facet>
						</p:column>
					</p:dataTable>
				</h:form>
			<!-- <h:commandButton  value="Agregar" /> -->	
			</p:panelGrid>
		</p:panel>
	</div>

<!-- Bloquea el boton de regresar del navegador -->     
	<script>
  function nobackbutton(){
   window.location.hash="no-back-button";
   window.location.hash="Again-No-back-button" //chrome
   window.onhashchange=function(){window.location.hash="no-back-button";}
  }
  </script>
  <script type="text/javascript">    
    PrimeFaces.locales['de'] = {
        closeText: 'Schließen',
        prevText: 'Zurück',
        nextText: 'Weiter',
        monthNames: ['Januar', 'Februar', 'März', 'April', 'Mai', 'Juni', 'Juli', 'August', 'September', 'Oktober', 'November', 'Dezember'],
        monthNamesShort: ['Jan', 'Feb', 'März', 'Apr', 'Mai', 'Jun', 'Jul', 'Aug', 'Sep', 'Okt', 'Nov', 'Dez'],
        dayNames: ['Sonntag', 'Montag', 'Dienstag', 'Mittwoch', 'Donnerstag', 'Freitag', 'Samstag'],
        dayNamesShort: ['Son', 'Mon', 'Die', 'Mit', 'Don', 'Fre', 'Sam'],
        dayNamesMin: ['S', 'M', 'D', 'M ', 'D', 'F ', 'S'],
        weekHeader: 'Woche',
        FirstDay: 1,
        isRTL: false,
        showMonthAfterYear: false,
        yearSuffix: '',
        timeOnlyTitle: 'Nur Zeit',
        timeText: 'Zeit',
        hourText: 'Stunde',
        minuteText: 'Minute',
        secondText: 'Sekunde',
        currentText: 'Aktuelles Datum',
        ampm: false,
        month: 'Monat',
        week: 'Woche',
        day: 'Tag',
        allDayText: 'Ganzer Tag'
    };
</script>
</body> 
</html>
